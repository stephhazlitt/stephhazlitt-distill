<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #545454; font-weight: bold; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #a1024a; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007faa; font-weight: bold; } /* ControlFlow */
code span.ch { color: #008000; } /* Char */
code span.cn { color: #d91e18; } /* Constant */
code span.co { color: #545454; } /* Comment */
code span.cv { color: #545454; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #aa5d00; } /* DataType */
code span.dv { color: #a1024a; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #a1024a; } /* Float */
code span.fu { color: #4254a7; } /* Function */
code span.im { } /* Import */
code span.in { color: #545454; font-weight: bold; } /* Information */
code span.kw { color: #007faa; font-weight: bold; } /* Keyword */
code span.op { color: #696969; } /* Operator */
code span.ot { color: #007faa; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #008000; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #008000; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #008000; } /* VerbatimString */
code span.wa { color: #545454; font-weight: bold; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Some Assembly Required: The Kids Are Coming, Let’s Get Ready</title>

<meta property="description" itemprop="description" content="Explorating patterns of student population change in Greater Victoria, B.C."/>

<link rel="canonical" href="https://github.com/stephhazlitt/posts/2020-09-26-sd61-kids/"/>
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"/>
<link rel="icon" type="image/vnd.microsoft.icon" href="../../images/favicon.ico"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2018-10-16"/>
<meta property="article:created" itemprop="dateCreated" content="2018-10-16"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Some Assembly Required: The Kids Are Coming, Let’s Get Ready"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Explorating patterns of student population change in Greater Victoria, B.C."/>
<meta property="og:url" content="https://github.com/stephhazlitt/posts/2020-09-26-sd61-kids/"/>
<meta property="og:image" content="https://github.com/stephhazlitt/posts/2020-09-26-sd61-kids/sd61-kids_files/sd61-actual-plots-1.png"/>
<meta property="og:image:width" content="768"/>
<meta property="og:image:height" content="576"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Some Assembly Required"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Some Assembly Required: The Kids Are Coming, Let’s Get Ready"/>
<meta property="twitter:description" content="Explorating patterns of student population change in Greater Victoria, B.C."/>
<meta property="twitter:url" content="https://github.com/stephhazlitt/posts/2020-09-26-sd61-kids/"/>
<meta property="twitter:image" content="https://github.com/stephhazlitt/posts/2020-09-26-sd61-kids/sd61-kids_files/sd61-actual-plots-1.png"/>
<meta property="twitter:image:width" content="768"/>
<meta property="twitter:image:height" content="576"/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["creative_commons","title","description","output","preview","date","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["CC BY-SA"]},{"type":"character","attributes":{},"value":["The Kids Are Coming, Let’s Get Ready"]},{"type":"character","attributes":{},"value":["Explorating patterns of student population change in Greater Victoria, B.C."]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained"]}},"value":[{"type":"logical","attributes":{},"value":[false]}]}]},{"type":"character","attributes":{},"value":["sd61-kids_files/sd61-actual-plots-1.png"]},{"type":"character","attributes":{},"value":["10-16-2018"]},{"type":"character","attributes":{},"value":["https://github.com/stephhazlitt/posts/2020-09-26-sd61-kids/"]},{"type":"character","attributes":{},"value":["https://github.com/stephhazlitt/posts/2020-09-26-sd61-kids/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["sd61-kids_files/sd61-actual-plots-1.png","sd61-kids_files/anchor-4.2.2/anchor.min.js","sd61-kids_files/bowser-1.9.3/bowser.min.js","sd61-kids_files/distill-2.2.21/template.v2.js","sd61-kids_files/header-attrs-2.3/header-attrs.js","sd61-kids_files/jquery-1.11.3/jquery.min.js","sd61-kids_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

</style>

<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: hidden;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}


/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.3/header-attrs.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<style type="text/css">
//
//.distill-site-footer {
// background-color: #000;
//  color: #ffffff;
//}
//
//.distill-site-header {
//  color: #000;
//  background-color: #2171b5;
//  font-size: 15px;
//  font-weight: 400;
//}

</style>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"The Kids Are Coming, Let’s Get Ready","description":"Explorating patterns of student population change in Greater Victoria, B.C.","authors":[],"publishedDate":"2018-10-16T00:00:00.000-07:00"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="https://stephhazlitt.ca">
<img src="../../images/wrench.png" alt="Logo"/>
</a>
<a href="../../index.html" class="title">Some Assembly Required</a>
</div>
<div class="nav-right">
<a href="../../index.html">Posts</a>
<a href="../../about.html">About</a>
<a href="https://twitter.com/stephhazlitt">
<i class="fa fa-twitter" aria-hidden="true"></i>
</a>
<a href="https://github.com/stephhazlitt">
<i class="fa fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>The Kids Are Coming, Let’s Get Ready</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Explorating patterns of student population change in Greater Victoria, B.C. <br> <br> May 2, 2018</p></p>
</div>


<div class="d-article">
<p>We are in the campaign period for the British Columbia <a href="https://elections.bc.ca/political-participants/local-elections-campaign-financing/2018-general-local-elections/">2018 General Local Elections</a>. I live in the Township of Esquimalt 🏙—an amazing community. However, there is always room to improve, even on amazing. I have enjoyed talking with our local government candidates, in particular about what issues motivated them to campaign to step into such important roles—the housing crisis, responsible development, community building. In turn, I have had a fair bit to say about issues on my mind, such as climate change (<a href="https://www.ipcc.ch/news_and_events/pr_181008_P48_spm.shtml">this 😱</a>), reducing speed limits in neighbourhood areas 🚗, more and safer bike paths for family cycling 🚲, and, <em>schools</em>. Specifically, space in our only catchment elementary school—<a href="https://macaulay.sd61.bc.ca/">L’Ecole Macaulay Elementary</a>.</p>
<p>Esquimalt used to have 2 catchment elementary schools, Lampson Street &amp; Macaulay (<a href="https://en.wikipedia.org/wiki/%C3%89cole_Victor-Brodeur">Ecole Victor-Brodeur</a> is also in Esquimalt, a school that serves the francophone community). Lampson, a school building with <a href="https://victoriadailyphoto.blogspot.com/2013/05/lampson-street-school.html">an impressive history in the region</a>, was closed as a catchment elementary school in 2007 due to declining enrolment.</p>
<p>However, things have and are changing—and pretty <em>fast</em>.</p>
<p>Due to the recent, legal change to <a href="https://bctf.ca/IssuesInEducation.aspx?id=5530">revert class size &amp; composition back to 2002 levels</a>, as well as a growing population—Macaulay has added one or more new classes in each of the 3 years I have had kids in the school, as have many elementary schools throughout the Capital Regional District. Macaulay has over 470 kids enrolled this year, so I have been talking 🗣 to candidates about how Macaulay is pretty <em>full</em>—and I think we need a plan for the kids that are still to come.</p>
<p>I thought it would be interesting to support this discussion with some <em>data</em>. Also, I am always keen to work on my <a href="https://www.r-project.org/">R</a> skills 👩‍💻. So here it goes.</p>
<h4 id="population-change-in-victoria-census-metropolitan-area-2001-2017">Population Change in Victoria Census Metropolitan Area (2001-2017)</h4>
<p>Let’s start by pulling some population estimate data from Statistics Canada—I found data for each Census Metropolitan Area by age group. Perfect. I had to Google to learn about what the Victoria Census Metropolitan Area (CMA) actually includes, turns out it includes <a href="https://www12.statcan.gc.ca/census-recensement/2011/as-sa/fogs-spg/Facts-cma-eng.cfm?LANG=Eng&amp;GK=CMA&amp;GC=935">all of the Capital Regional District minus the Gulf Islands</a>. Let’s have a look 👀:</p>
<details>
<summary>
<i>Click to see the R code for the Victoria CMA plots</i>
</summary>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="co">## Data: Victoria Census Metropolitan Census Area (British Columbia) Population</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="co">## Estimates [Table: 17-10-0078-01 (formerly CANSIM  051-0056) from Statistics Canada</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="co">#get Statistics Canada data using cansim package</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>bc_popn &lt;-<span class="st"> </span><span class="kw">get_cansim</span>(<span class="dv">1710007801</span>) <span class="op">%&gt;%</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(GEO <span class="op">==</span><span class="st"> &quot;Victoria, British Columbia&quot;</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>         Sex <span class="op">==</span><span class="st"> &quot;Both sexes&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="dt">year =</span> REF_DATE, <span class="dt">age_group =</span> <span class="st">`</span><span class="dt">Age group</span><span class="st">`</span>, <span class="dt">population_estimate =</span> VALUE) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year =</span> <span class="kw">as.integer</span>(year))</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a><span class="co">#make plot of Victoria CMA population estimates</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>cma_plot &lt;-<span class="st"> </span>bc_popn <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(age_group <span class="op">==</span><span class="st"> &quot;All ages&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> population_estimate, <span class="dt">group =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">colour =</span> <span class="st">&quot;#54278f&quot;</span>) <span class="op">+</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">2001</span>, <span class="dv">2018</span>),</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a>                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">2002</span>, <span class="dv">2017</span>, <span class="dv">3</span>),</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="op">+</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">320000</span>, <span class="dv">380000</span>),</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true"></a>                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">320000</span>, <span class="dv">380000</span>, <span class="dv">5000</span>),</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">labels =</span> comma) <span class="op">+</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Population Estimates for Victoria CMA&quot;</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Include all ages&quot;</span>,</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Data sourced from Statistics Canada&quot;</span>) <span class="op">+</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true"></a><span class="st">  </span>theme_plots</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true"></a><span class="co">#kid age groups</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true"></a>kid_ages &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;0 to 4 years&quot;</span>, <span class="st">&quot;5 to 9 years&quot;</span>, <span class="st">&quot;10 to 14 years&quot;</span>, <span class="st">&quot;15 to 19 years&quot;</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true"></a><span class="co">#make plot of kid Victoria CMA population estimates</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true"></a>cma_kids_plot &lt;-<span class="st"> </span>bc_popn <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(age_group <span class="op">%in%</span><span class="st"> </span>kid_ages) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">population_estimate =</span> <span class="kw">sum</span>(population_estimate)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> population_estimate, <span class="dt">group =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">colour =</span> <span class="st">&quot;#54278f&quot;</span>) <span class="op">+</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">2001</span>, <span class="dv">2018</span>),</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true"></a>                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">2002</span>, <span class="dv">2017</span>, <span class="dv">3</span>),</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="op">+</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">64000</span>, <span class="dv">70000</span>),</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true"></a>                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">64000</span>, <span class="dv">70000</span>, <span class="dv">500</span>),</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">labels =</span> comma) <span class="op">+</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Kid Population Estimates for Victoria CMA&quot;</span>,</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Kids include ages 0 to 19 years&quot;</span>,</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Data sourced from Statistics Canada&quot;</span>) <span class="op">+</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true"></a><span class="st">  </span>theme_plots</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="co">#plot the Victoria CMA plots</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>cma_plot <span class="op">+</span><span class="st"> </span>cma_kids_plot</span></code></pre></div>
</details>
<p><img src="sd61-kids_files/cma-actual-plots-1.png" /><!-- --></p>
<p>The Statistics Canada data confirms what we hear all the time, the population in the Victoria CMA has been steadily increasing since 2001. But <em>not</em> due to more kids—the population of 0 to 19 year olds steadily declined from 2001 until 2014. This explains the decline in enrolment—and School District decisions to close schools at that time. However, 2014 brings a clear change—kid numbers start increasing. But what about in the Township of Esquimalt?</p>
<h4 id="population-change-in-the-township-of-esquimalt-2001-2017">Population Change in the Township of Esquimalt (2001-2017)</h4>
<p>I found some population data for Municipalities from <a href="https://www2.gov.bc.ca/gov/content?id=36D1A7A4BEE248598281824C13CB65B6">BCStats</a>, but unfortunately not by age group 😞.</p>
<details>
<summary>
<i>Click to see the R code for the Esquimalt plot &amp; map</i>
</summary>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="co">## Data: Esquimalt District Municipality population estimates from</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="co">## BCStats Population Estimates webpage</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="co">#municipalities I want</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>crd &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Central Saanich&quot;</span>, <span class="st">&quot;Colwood&quot;</span>, <span class="st">&quot;Esquimalt&quot;</span>, <span class="st">&quot;Highlands&quot;</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>         <span class="st">&quot;Langford&quot;</span>, <span class="st">&quot;Metchosin&quot;</span>, <span class="st">&quot;North Saanich&quot;</span>, <span class="st">&quot;Oak Bay&quot;</span>, <span class="st">&quot;Saanich&quot;</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>         <span class="st">&quot;Sidney&quot;</span>, <span class="st">&quot;Sooke&quot;</span>, <span class="st">&quot;Victoria&quot;</span>, <span class="st">&quot;View Royal&quot;</span>)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a><span class="co">#get the 2001-2011 CRD population estimate data file </span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a>bcstats_mun_<span class="dv">2001</span>_<span class="dv">2011</span> &lt;-<span class="st"> </span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a><span class="st">  &quot;http://www.bcstats.gov.bc.ca/Files/0379a32f-cec8-438d-83e0-6724b2a2a272/BCDevelopmentRegionRegionalDistrictandMuncipalPopulationEstimates2001-2011.xls&quot;</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true"></a>get_mun_<span class="dv">2001</span>_<span class="dv">2011</span> &lt;-<span class="st"> </span><span class="kw">curl_download</span>(bcstats_mun_<span class="dv">2001</span>_<span class="dv">2011</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true"></a>                                   <span class="dt">destfile =</span> <span class="kw">glue</span>(path, <span class="st">&quot;/bcstats_mun_2001_2011.xls&quot;</span>))</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true"></a>crd_<span class="dv">2001</span>_<span class="dv">2011</span> &lt;-<span class="st"> </span><span class="kw">read_xls</span>(get_mun_<span class="dv">2001</span>_<span class="dv">2011</span>, <span class="dt">skip =</span> <span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st">  </span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(Name <span class="op">%in%</span><span class="st"> </span>crd) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="st">`</span><span class="dt">2011</span><span class="st">`</span>, <span class="op">-</span>Type, <span class="op">-</span>SGC)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true"></a><span class="co"># get 2011-2017 CRD population estimate data file and merge data with the 2001-2011 data </span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true"></a>bcstats_mun_<span class="dv">2011</span>_<span class="dv">2017</span> &lt;-<span class="st"> </span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true"></a><span class="st">  &quot;http://www.bcstats.gov.bc.ca/Files/285cd56c-9be1-4c5e-a153-3deeffa2ac94/BCDevelopmentRegionRegionalDistrictandMuncipalPopulationEstimates2011-2015.xls&quot;</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true"></a></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true"></a>get_mun_<span class="dv">2011</span>_<span class="dv">2017</span> &lt;-<span class="st"> </span><span class="kw">curl_download</span>(bcstats_mun_<span class="dv">2011</span>_<span class="dv">2017</span>,</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true"></a>                                   <span class="dt">destfile =</span> <span class="kw">glue</span>(path, <span class="st">&quot;/bcstats_mun_2011_2017.xls&quot;</span>))</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true"></a>crd_<span class="dv">2001</span>_<span class="dv">2017</span> &lt;-<span class="st"> </span><span class="kw">read_xls</span>(get_mun_<span class="dv">2011</span>_<span class="dv">2017</span>, <span class="dt">range =</span> (<span class="st">&quot;A3:J48&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(Name <span class="op">%in%</span><span class="st"> </span>crd) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true"></a><span class="st">  </span><span class="kw">bind_cols</span>(crd_<span class="dv">2001</span>_<span class="dv">2011</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="st">`</span><span class="dt">2011</span><span class="st">`</span>, <span class="op">-</span><span class="st">`</span><span class="dt">Area Type</span><span class="st">`</span>, <span class="op">-</span>SGC, <span class="op">-</span>Name1) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true"></a><span class="st">  </span><span class="kw">gather</span>(<span class="dt">key =</span>  year, <span class="dt">value =</span> population_estimate, <span class="op">-</span>Name) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">population_estimate =</span> <span class="kw">as.numeric</span>(population_estimate),</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true"></a>         <span class="dt">year =</span> <span class="kw">as.integer</span>(year)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true"></a><span class="st">  </span><span class="kw">arrange</span>(year)</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true"></a><span class="co">#plot of Township of Esquimalt population estimates</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true"></a>esquimalt_plot &lt;-<span class="st"> </span>crd_<span class="dv">2001</span>_<span class="dv">2017</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(Name <span class="op">==</span><span class="st"> &quot;Esquimalt&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> year, <span class="dt">y =</span> population_estimate, <span class="dt">group =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">colour =</span> <span class="st">&quot;#54278f&quot;</span>) <span class="op">+</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Population Estimates for Esquimalt&quot;</span>,</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Includes all ages&quot;</span>,</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Data sourced from BCStats&quot;</span>) <span class="op">+</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true"></a><span class="st">   </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">2001</span>, <span class="dv">2018</span>),</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true"></a>                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">2002</span>, <span class="dv">2017</span>, <span class="dv">3</span>),</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="op">+</span></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">16400</span>, <span class="dv">17600</span>),</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true"></a>                     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">16400</span>, <span class="dv">17600</span>, <span class="dv">100</span>),</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true"></a>                     <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">labels =</span> comma) <span class="op">+</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true"></a><span class="st">  </span>theme_plots</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true"></a><span class="co">#calculate municipality population change for 2015 to 2017</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true"></a>crd_change &lt;-<span class="st"> </span>crd_<span class="dv">2001</span>_<span class="dv">2017</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">2015</span>, <span class="dv">2017</span>)) <span class="op">%&gt;%</span></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(Name) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">popchange =</span> population_estimate<span class="op">-</span><span class="kw">lag</span>(population_estimate)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">percchange =</span> <span class="kw">round</span>((popchange<span class="op">/</span><span class="kw">lag</span>(population_estimate) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>), <span class="dt">digits =</span> <span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2017</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>year) </span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true"></a></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true"></a><span class="co">#map 2 year % population change for municipalities</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true"></a>crd_change_spatial &lt;-<span class="st"> </span><span class="kw">municipalities</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(ADMIN_AREA_ABBREVIATION <span class="op">%in%</span><span class="st"> </span>crd) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Name =</span> ADMIN_AREA_ABBREVIATION) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true"></a><span class="st">  </span><span class="kw">left_join</span>(crd_change) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> percchange)) <span class="op">+</span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true"></a><span class="st">  </span><span class="kw">coord_sf</span>(<span class="dt">datum =</span> <span class="ot">NA</span>) <span class="op">+</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;CRD Percent Population Change 2015-2017&quot;</span>,</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Includes all ages&quot;</span>,</span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Data sourced from BCStats&quot;</span>) <span class="op">+</span></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_fill_gradient</span>(<span class="dt">name =</span> <span class="st">&quot;Percent</span><span class="ch">\n</span><span class="st">Change&quot;</span>, <span class="dt">low =</span> <span class="st">&quot;#bcbddc&quot;</span>, <span class="dt">high =</span> <span class="st">&quot;#132B43&quot;</span>) <span class="op">+</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true"></a><span class="st">  </span>theme_plots</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="co">#plot the Esquimalt plots</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>esquimalt_plot <span class="op">+</span><span class="st"> </span>crd_change_spatial</span></code></pre></div>
</details>
<p><img src="sd61-kids_files/mun-actual-plots-1.png" /><!-- --></p>
<p>The Township of Esquimalt population has been a bit more variable since 2001, with a declining pattern from 2006 to 2013. However, there has been an uptick in recent years. In fact, <em>all</em> the Greater Victoria municipalities—except North Saanich—had a measurable increase in popuation over the last 2 years—Victoria a 1% increase, Esquimalt 3% and Sooke 11%! Wow, that is <em>a lot</em>.</p>
<p>What I <em>really</em> want to know is how the population of <em>kids</em> is changing in Esquimalt. I was not able to find population-by-age data for Esquimalt, but I did find it for the Greater Victoria School Districts.</p>
<h4 id="kid-population-change-in-school-district-61-greater-victoria">Kid Population Change in School District 61-Greater Victoria</h4>
<details>
<summary>
<i>Click to see the R code for the SD61 plots</i>
</summary>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="co">## Data: School District 61 Population Estimates &amp; Projections from BCStats manual </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="co">## online tool: https://www.bcstats.gov.bc.ca/apps/PopulationProjections.aspx</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a><span class="co">#get SD61 population estimates &amp; projections</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true"></a>sd61_kids &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">glue</span>(path, <span class="st">&quot;/Population_Projections.csv&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">select</span>(Year, <span class="st">&quot;&lt;1&quot;</span>, <span class="st">&quot;1-4&quot;</span>, <span class="st">&quot;5-9&quot;</span>, <span class="st">&quot;10-14&quot;</span>, <span class="st">&quot;15-19&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true"></a><span class="st">  </span><span class="kw">gather</span>(<span class="dt">key =</span> age_group, <span class="dt">value =</span> population_estimate, <span class="op">-</span>Year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(Year <span class="op">&lt;</span><span class="st"> </span><span class="dv">2038</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">age_group =</span> <span class="kw">factor</span>(age_group, <span class="dt">ordered =</span> <span class="ot">TRUE</span>,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true"></a>                            <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;&lt;1&quot;</span>, <span class="st">&quot;1-4&quot;</span>, <span class="st">&quot;5-9&quot;</span>, <span class="st">&quot;10-14&quot;</span>, <span class="st">&quot;15-19&quot;</span>)),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true"></a>         <span class="dt">data_type =</span> <span class="kw">case_when</span>(Year <span class="op">&lt;</span><span class="st"> </span><span class="dv">2018</span> <span class="op">~</span><span class="st"> &quot;estimated&quot;</span>,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true"></a>                               <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;projected&quot;</span>))</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true"></a><span class="co">#plot of kid population estimates in SD61 by age group</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true"></a>sd61_kids_line_plot &lt;-<span class="st"> </span>sd61_kids <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true"></a><span class="st">  </span><span class="kw">filter</span>(age_group <span class="op">!=</span><span class="st"> &quot;&lt;1&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(Year, population_estimate, <span class="dt">group =</span> age_group, <span class="dt">colour =</span> data_type)) <span class="op">+</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_segment</span>(<span class="kw">aes</span>(<span class="dt">xend =</span> <span class="dv">2037</span> , <span class="dt">yend =</span> population_estimate), <span class="dt">linetype =</span> <span class="dv">2</span>, <span class="dt">colour =</span> <span class="st">&#39;grey&#39;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">size =</span> <span class="dv">2</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">x =</span> <span class="fl">2037.1</span> , <span class="dt">label =</span> age_group), <span class="dt">hjust =</span> <span class="dv">0</span>, <span class="dt">colour =</span> <span class="st">&quot;#54278f&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true"></a><span class="st">  </span><span class="kw">coord_cartesian</span>(<span class="dt">clip =</span> <span class="st">&#39;off&#39;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Kid Population Estimates &amp; Projections by Age Group for SD61&quot;</span>,</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true"></a>       <span class="co"># subtitle = &quot;Kids include ages 1 to 19 years&quot;,</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Data sourced from BCStats&quot;</span>) <span class="op">+</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">plot.margin =</span> <span class="kw">margin</span>(<span class="fl">5.5</span>, <span class="dv">0</span>, <span class="fl">5.5</span>, <span class="fl">5.5</span>)) <span class="op">+</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">1984</span>, <span class="dv">2040</span>), <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">1986</span>, <span class="dv">2038</span>, <span class="dv">5</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="op">+</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">6000</span>, <span class="dv">13000</span>, <span class="dv">1000</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">labels =</span> comma) <span class="op">+</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_colour_manual</span>(<span class="dt">name =</span> <span class="st">&quot;&quot;</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;#54278f&quot;</span>, <span class="st">&quot;#9e9ac8&quot;</span>)) <span class="op">+</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">name =</span> <span class="st">&quot;&quot;</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;#54278f&quot;</span>, <span class="st">&quot;#9e9ac8&quot;</span>)) <span class="op">+</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true"></a><span class="st">  </span>theme_plots <span class="op">+</span></span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true"></a>        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>))</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true"></a></span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true"></a><span class="co">#plot of total sd61 kid population estimates</span></span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true"></a>sd61_kids_total_plot &lt;-<span class="st"> </span>sd61_kids <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(Year, data_type) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">population_estimate =</span> <span class="kw">sum</span>(population_estimate))  <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> population_estimate, <span class="dt">colour =</span> data_type, <span class="dt">group =</span> <span class="dv">1</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true"></a><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Kid Population Estimates &amp; Projections for SD61&quot;</span>,</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true"></a>       <span class="dt">subtitle =</span> <span class="st">&quot;Kids include ages 0 to 19 years&quot;</span>,</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true"></a>       <span class="dt">caption =</span> <span class="st">&quot;Data sourced from BCStats&quot;</span>) <span class="op">+</span></span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">1984</span>, <span class="dv">2040</span>), <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">1986</span>, <span class="dv">2038</span>, <span class="dv">5</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="op">+</span></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">35000</span>, <span class="dv">43000</span>), <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">35000</span>, <span class="dv">43000</span>, <span class="dv">500</span>), <span class="dt">expand =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="dt">labels =</span> comma) <span class="op">+</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true"></a><span class="st">  </span><span class="kw">scale_colour_manual</span>(<span class="dt">name =</span> <span class="st">&quot;&quot;</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;#54278f&quot;</span>, <span class="st">&quot;#9e9ac8&quot;</span>)) <span class="op">+</span></span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true"></a><span class="st">  </span>theme_plots <span class="op">+</span></span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="kw">c</span>(.<span class="dv">2</span>,.<span class="dv">2</span>),</span>
<span id="cb5-52"><a href="#cb5-52" aria-hidden="true"></a>        <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="dv">12</span>)) </span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="co">#animate the sd61 age group plot</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a>sd61_kids_line_plot <span class="op">+</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">transition_reveal</span>(age_group, Year)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a><span class="co">#plot the sd61 total line plot</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a>sd61_kids_total_plot</span></code></pre></div>
</details>
<p><img src="sd61-kids_files/sd61-actual-anim-1.gif" style="display: block; margin: auto;" /></p>
<p>The School District 61 data shows a similar pattern to what we have already observed— population declines for all kid age groups through the 2000s. We see the recent increases, <em>and</em> the projected increases to come—for at least the next <strong>15</strong> years! I confess that while the animated plot is fun to make 🤓, rolling the kid age group populations together and keeping things still really tells the story:</p>
<p><img src="sd61-kids_files/sd61-actual-plots-1.png" style="display: block; margin: auto;" /></p>
<h4 id="yep-the-kids-are-coming">Yep, The Kids Are Coming</h4>
<p>Our Esquimalt catchment elementary school is full and the kid population estimate lines are going up—and predicted to do so for at least the next 15 years 📈. In my opinion, a plan for the kids that are still to come should be on the to-do list 📜 for the Township of Esquimalt. The elementary school space crunch has already had community impacts throughout the Capital Regional District, displacing dedicated computer labs, after-school care situations, pre-schools. The School District recently launched a <a href="https://www.sd61.bc.ca/news-events/community/catchmentboundaryreview/">Catchment Boundary Review &amp; Public Consultation</a>—a great step in supporting planning. However, with only one catchment school and one boundary, I think it is <em>also</em> time to talk about bringing a second catchment elementary school (back) on line for Esquimalt kids 🏫.</p>
<ul>
<li>Details on the data sources (e.g. website url, licences) are <a href="https://github.com/stephhazlitt/some-assembly-required/blob/master/R/bc-sd61-popn/data/README.md">here</a></li>
<li>The R source code can be reviewed <a href="https://github.com/stephhazlitt/some-assembly-required/blob/master/R/bc-sd61-popn/sd61_kids.Rmd">here</a></li>
<li>Learn more about the CRD &amp; Township of Esquimalt candidates <a href="https://www.timescolonist.com/elections">here</a></li>
<li>Don’t forget to get out and <a href="https://www.esquimalt.ca/municipal-hall/elections/2018-election/information-voters"><strong>VOTE on October 20th, 2018</strong></a></li>
</ul>

<hr>

<p>This post was originally published through <a href="https://github.com/stephhazlitt/some-assembly-required">GitHub.</a></p>


<div class="sourceCode" id="cb1"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>


<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="updates-and-corrections">Corrections</h3>
  <p>If you see mistakes or want to suggest changes, please <a href="https://github.com/stephhazlitt/stephhazlitt-distill/issues/new">create an issue</a> on the source repository.</p>
  <h3 id="reuse">Reuse</h3>
  <p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>. Source code is available at <a href="https://github.com/stephhazlitt/stephhazlitt-distill">https://github.com/stephhazlitt/stephhazlitt-distill</a>, unless otherwise noted. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
